{"ast":null,"code":"import React,{useState}from'react';import{CCAVENUE_CONFIG}from'./config';import'./PaymentForm.css';import{showNotification}from'../utils/notifications';import{processCCAvenuePayment}from'../utils/payment-processor';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export const PaymentForm=()=>{const[showCardForm,setShowCardForm]=useState(false);const[amount,setAmount]=useState('');const[cardNumber,setCardNumber]=useState('');const[expiryDate,setExpiryDate]=useState('');const[cvv,setCvv]=useState('');const[cardHolderName,setCardHolderName]=useState('');const handleInitialSubmit=e=>{e.preventDefault();setShowCardForm(true);};const handleCardSubmit=async e=>{e.preventDefault();// Show processing notification\nshowNotification('Payment Processing','Please wait while we process your payment...');try{// CCAvenue payment processing\nconst response=await processCCAvenuePayment({amount,currency:amount.includes('$')?'USD':'INR',cardDetails:{number:cardNumber,holder:cardHolderName,expiry:expiryDate,cvv}});// Success notification\nshowNotification('Payment Successful','Your transaction has been completed successfully!');}catch(error){showNotification('Payment Failed','Please try again or use a different card.');}};// Currency formatter based on input\nconst formatAmount=value=>{const isCurrencySymbol=value.startsWith('$')||value.startsWith('₹');if(!isCurrencySymbol){return`₹${value}`;// Default to INR\n}return value;};const getCardType=number=>{const firstDigit=number.charAt(0);const firstTwoDigits=number.substring(0,2);if(number.startsWith('34')||number.startsWith('37'))return'amex';if(firstDigit==='4')return'visa';if(['51','52','53','54','55'].includes(firstTwoDigits))return'mastercard';if(['60','65','81','82'].includes(firstTwoDigits))return'rupay';return'unknown';};return/*#__PURE__*/_jsx(\"div\",{className:\"payment-container\",children:!showCardForm?/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleInitialSubmit,className:\"payment-form\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Enter Payment Amount\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Amount (\\u20B9)\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:amount,onChange:e=>setAmount(e.target.value.replace(/[^\\d.]/g,'')),placeholder:\"Enter amount\",required:true})]}),/*#__PURE__*/_jsxs(\"button\",{type:\"submit\",className:\"submit-button\",children:[\"Pay \\u20B9\",amount||'0']})]}):/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleCardSubmit,className:\"payment-form\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Enter Card Details\"}),/*#__PURE__*/_jsx(\"div\",{className:\"card-icons\",children:Object.values(CCAVENUE_CONFIG.SUPPORTED_CARDS).map(card=>/*#__PURE__*/_jsx(\"span\",{className:`card-icon ${getCardType(cardNumber)===card?'active':''}`,children:card.toUpperCase()},card))}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Card Number\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:cardNumber,onChange:e=>setCardNumber(e.target.value.replace(/\\D/g,'').slice(0,16)),placeholder:\"1234 5678 9012 3456\",required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Card Holder Name\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:cardHolderName,onChange:e=>setCardHolderName(e.target.value),placeholder:\"Name on card\",required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-row\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Expiry Date\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:expiryDate,onChange:e=>setExpiryDate(e.target.value),placeholder:\"MM/YY\",maxLength:5,required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"CVV\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",value:cvv,onChange:e=>setCvv(e.target.value.slice(0,4)),placeholder:\"***\",maxLength:4,required:true})]})]}),/*#__PURE__*/_jsxs(\"button\",{type:\"submit\",className:\"submit-button\",children:[\"Pay \\u20B9\",amount]})]})});};","map":{"version":3,"names":["React","useState","CCAVENUE_CONFIG","showNotification","processCCAvenuePayment","jsx","_jsx","jsxs","_jsxs","PaymentForm","showCardForm","setShowCardForm","amount","setAmount","cardNumber","setCardNumber","expiryDate","setExpiryDate","cvv","setCvv","cardHolderName","setCardHolderName","handleInitialSubmit","e","preventDefault","handleCardSubmit","response","currency","includes","cardDetails","number","holder","expiry","error","formatAmount","value","isCurrencySymbol","startsWith","getCardType","firstDigit","charAt","firstTwoDigits","substring","className","children","onSubmit","type","onChange","target","replace","placeholder","required","Object","values","SUPPORTED_CARDS","map","card","toUpperCase","slice","maxLength"],"sources":["/mnt/development/pop-dev-assistant/vscode-extension/src/payments/pop-payment-module/src/components/PaymentForm.tsx"],"sourcesContent":["import React, { useState } from 'react';\nimport { CCAVENUE_CONFIG } from './config';\nimport './PaymentForm.css';\nimport { showNotification } from '../utils/notifications';\nimport { processCCAvenuePayment } from '../utils/payment-processor';\n\nexport const PaymentForm: React.FC = () => {\n    const [showCardForm, setShowCardForm] = useState(false);\n    const [amount, setAmount] = useState('');\n    const [cardNumber, setCardNumber] = useState('');\n    const [expiryDate, setExpiryDate] = useState('');\n    const [cvv, setCvv] = useState('');\n    const [cardHolderName, setCardHolderName] = useState('');\n\n    const handleInitialSubmit = (e: React.FormEvent) => {\n        e.preventDefault();\n        setShowCardForm(true);\n    };\n\n    const handleCardSubmit = async (e: React.FormEvent) => {\n        e.preventDefault();\n        \n        // Show processing notification\n        showNotification('Payment Processing', 'Please wait while we process your payment...');\n        \n        try {\n            // CCAvenue payment processing\n            const response = await processCCAvenuePayment({\n                amount,\n                currency: amount.includes('$') ? 'USD' : 'INR',\n                cardDetails: {\n                    number: cardNumber,\n                    holder: cardHolderName,\n                    expiry: expiryDate,\n                    cvv\n                }\n            });\n    \n            // Success notification\n            showNotification('Payment Successful', 'Your transaction has been completed successfully!');\n        } catch (error) {\n            showNotification('Payment Failed', 'Please try again or use a different card.');\n        }\n    };\n    \n    // Currency formatter based on input\n    const formatAmount = (value: string) => {\n        const isCurrencySymbol = value.startsWith('$') || value.startsWith('₹');\n        if (!isCurrencySymbol) {\n            return `₹${value}`; // Default to INR\n        }\n        return value;\n    };\n    \n\n    const getCardType = (number: string) => {\n        const firstDigit = number.charAt(0);\n        const firstTwoDigits = number.substring(0, 2);\n        \n        if (number.startsWith('34') || number.startsWith('37')) return 'amex';\n        if (firstDigit === '4') return 'visa';\n        if (['51', '52', '53', '54', '55'].includes(firstTwoDigits)) return 'mastercard';\n        if (['60', '65', '81', '82'].includes(firstTwoDigits)) return 'rupay';\n        return 'unknown';\n    };\n\n    return (\n        <div className=\"payment-container\">\n            {!showCardForm ? (\n                <form onSubmit={handleInitialSubmit} className=\"payment-form\">\n                    <h2>Enter Payment Amount</h2>\n                    <div className=\"form-group\">\n                        <label>Amount (₹)</label>\n                        <input\n                            type=\"text\"\n                            value={amount}\n                            onChange={(e) => setAmount(e.target.value.replace(/[^\\d.]/g, ''))}\n                            placeholder=\"Enter amount\"\n                            required\n                        />\n                    </div>\n                    <button type=\"submit\" className=\"submit-button\">\n                        Pay ₹{amount || '0'}\n                    </button>\n                </form>\n            ) : (\n                <form onSubmit={handleCardSubmit} className=\"payment-form\">\n                    <h2>Enter Card Details</h2>\n                    <div className=\"card-icons\">\n                        {Object.values(CCAVENUE_CONFIG.SUPPORTED_CARDS).map(card => (\n                            <span key={card} className={`card-icon ${getCardType(cardNumber) === card ? 'active' : ''}`}>\n                                {card.toUpperCase()}\n                            </span>\n                        ))}\n                    </div>\n                    <div className=\"form-group\">\n                        <label>Card Number</label>\n                        <input\n                            type=\"text\"\n                            value={cardNumber}\n                            onChange={(e) => setCardNumber(e.target.value.replace(/\\D/g, '').slice(0, 16))}\n                            placeholder=\"1234 5678 9012 3456\"\n                            required\n                        />\n                    </div>\n                    <div className=\"form-group\">\n                        <label>Card Holder Name</label>\n                        <input\n                            type=\"text\"\n                            value={cardHolderName}\n                            onChange={(e) => setCardHolderName(e.target.value)}\n                            placeholder=\"Name on card\"\n                            required\n                        />\n                    </div>\n                    <div className=\"form-row\">\n                        <div className=\"form-group\">\n                            <label>Expiry Date</label>\n                            <input\n                                type=\"text\"\n                                value={expiryDate}\n                                onChange={(e) => setExpiryDate(e.target.value)}\n                                placeholder=\"MM/YY\"\n                                maxLength={5}\n                                required\n                            />\n                        </div>\n                        <div className=\"form-group\">\n                            <label>CVV</label>\n                            <input\n                                type=\"password\"\n                                value={cvv}\n                                onChange={(e) => setCvv(e.target.value.slice(0, 4))}\n                                placeholder=\"***\"\n                                maxLength={4}\n                                required\n                            />\n                        </div>\n                    </div>\n                    <button type=\"submit\" className=\"submit-button\">\n                        Pay ₹{amount}\n                    </button>\n                </form>\n            )}\n        </div>\n    );\n};"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,KAAQ,OAAO,CACvC,OAASC,eAAe,KAAQ,UAAU,CAC1C,MAAO,mBAAmB,CAC1B,OAASC,gBAAgB,KAAQ,wBAAwB,CACzD,OAASC,sBAAsB,KAAQ,4BAA4B,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAEpE,MAAO,MAAM,CAAAC,WAAqB,CAAGA,CAAA,GAAM,CACvC,KAAM,CAACC,YAAY,CAAEC,eAAe,CAAC,CAAGV,QAAQ,CAAC,KAAK,CAAC,CACvD,KAAM,CAACW,MAAM,CAAEC,SAAS,CAAC,CAAGZ,QAAQ,CAAC,EAAE,CAAC,CACxC,KAAM,CAACa,UAAU,CAAEC,aAAa,CAAC,CAAGd,QAAQ,CAAC,EAAE,CAAC,CAChD,KAAM,CAACe,UAAU,CAAEC,aAAa,CAAC,CAAGhB,QAAQ,CAAC,EAAE,CAAC,CAChD,KAAM,CAACiB,GAAG,CAAEC,MAAM,CAAC,CAAGlB,QAAQ,CAAC,EAAE,CAAC,CAClC,KAAM,CAACmB,cAAc,CAAEC,iBAAiB,CAAC,CAAGpB,QAAQ,CAAC,EAAE,CAAC,CAExD,KAAM,CAAAqB,mBAAmB,CAAIC,CAAkB,EAAK,CAChDA,CAAC,CAACC,cAAc,CAAC,CAAC,CAClBb,eAAe,CAAC,IAAI,CAAC,CACzB,CAAC,CAED,KAAM,CAAAc,gBAAgB,CAAG,KAAO,CAAAF,CAAkB,EAAK,CACnDA,CAAC,CAACC,cAAc,CAAC,CAAC,CAElB;AACArB,gBAAgB,CAAC,oBAAoB,CAAE,8CAA8C,CAAC,CAEtF,GAAI,CACA;AACA,KAAM,CAAAuB,QAAQ,CAAG,KAAM,CAAAtB,sBAAsB,CAAC,CAC1CQ,MAAM,CACNe,QAAQ,CAAEf,MAAM,CAACgB,QAAQ,CAAC,GAAG,CAAC,CAAG,KAAK,CAAG,KAAK,CAC9CC,WAAW,CAAE,CACTC,MAAM,CAAEhB,UAAU,CAClBiB,MAAM,CAAEX,cAAc,CACtBY,MAAM,CAAEhB,UAAU,CAClBE,GACJ,CACJ,CAAC,CAAC,CAEF;AACAf,gBAAgB,CAAC,oBAAoB,CAAE,mDAAmD,CAAC,CAC/F,CAAE,MAAO8B,KAAK,CAAE,CACZ9B,gBAAgB,CAAC,gBAAgB,CAAE,2CAA2C,CAAC,CACnF,CACJ,CAAC,CAED;AACA,KAAM,CAAA+B,YAAY,CAAIC,KAAa,EAAK,CACpC,KAAM,CAAAC,gBAAgB,CAAGD,KAAK,CAACE,UAAU,CAAC,GAAG,CAAC,EAAIF,KAAK,CAACE,UAAU,CAAC,GAAG,CAAC,CACvE,GAAI,CAACD,gBAAgB,CAAE,CACnB,MAAO,IAAID,KAAK,EAAE,CAAE;AACxB,CACA,MAAO,CAAAA,KAAK,CAChB,CAAC,CAGD,KAAM,CAAAG,WAAW,CAAIR,MAAc,EAAK,CACpC,KAAM,CAAAS,UAAU,CAAGT,MAAM,CAACU,MAAM,CAAC,CAAC,CAAC,CACnC,KAAM,CAAAC,cAAc,CAAGX,MAAM,CAACY,SAAS,CAAC,CAAC,CAAE,CAAC,CAAC,CAE7C,GAAIZ,MAAM,CAACO,UAAU,CAAC,IAAI,CAAC,EAAIP,MAAM,CAACO,UAAU,CAAC,IAAI,CAAC,CAAE,MAAO,MAAM,CACrE,GAAIE,UAAU,GAAK,GAAG,CAAE,MAAO,MAAM,CACrC,GAAI,CAAC,IAAI,CAAE,IAAI,CAAE,IAAI,CAAE,IAAI,CAAE,IAAI,CAAC,CAACX,QAAQ,CAACa,cAAc,CAAC,CAAE,MAAO,YAAY,CAChF,GAAI,CAAC,IAAI,CAAE,IAAI,CAAE,IAAI,CAAE,IAAI,CAAC,CAACb,QAAQ,CAACa,cAAc,CAAC,CAAE,MAAO,OAAO,CACrE,MAAO,SAAS,CACpB,CAAC,CAED,mBACInC,IAAA,QAAKqC,SAAS,CAAC,mBAAmB,CAAAC,QAAA,CAC7B,CAAClC,YAAY,cACVF,KAAA,SAAMqC,QAAQ,CAAEvB,mBAAoB,CAACqB,SAAS,CAAC,cAAc,CAAAC,QAAA,eACzDtC,IAAA,OAAAsC,QAAA,CAAI,sBAAoB,CAAI,CAAC,cAC7BpC,KAAA,QAAKmC,SAAS,CAAC,YAAY,CAAAC,QAAA,eACvBtC,IAAA,UAAAsC,QAAA,CAAO,iBAAU,CAAO,CAAC,cACzBtC,IAAA,UACIwC,IAAI,CAAC,MAAM,CACXX,KAAK,CAAEvB,MAAO,CACdmC,QAAQ,CAAGxB,CAAC,EAAKV,SAAS,CAACU,CAAC,CAACyB,MAAM,CAACb,KAAK,CAACc,OAAO,CAAC,SAAS,CAAE,EAAE,CAAC,CAAE,CAClEC,WAAW,CAAC,cAAc,CAC1BC,QAAQ,MACX,CAAC,EACD,CAAC,cACN3C,KAAA,WAAQsC,IAAI,CAAC,QAAQ,CAACH,SAAS,CAAC,eAAe,CAAAC,QAAA,EAAC,YACvC,CAAChC,MAAM,EAAI,GAAG,EACf,CAAC,EACP,CAAC,cAEPJ,KAAA,SAAMqC,QAAQ,CAAEpB,gBAAiB,CAACkB,SAAS,CAAC,cAAc,CAAAC,QAAA,eACtDtC,IAAA,OAAAsC,QAAA,CAAI,oBAAkB,CAAI,CAAC,cAC3BtC,IAAA,QAAKqC,SAAS,CAAC,YAAY,CAAAC,QAAA,CACtBQ,MAAM,CAACC,MAAM,CAACnD,eAAe,CAACoD,eAAe,CAAC,CAACC,GAAG,CAACC,IAAI,eACpDlD,IAAA,SAAiBqC,SAAS,CAAE,aAAaL,WAAW,CAACxB,UAAU,CAAC,GAAK0C,IAAI,CAAG,QAAQ,CAAG,EAAE,EAAG,CAAAZ,QAAA,CACvFY,IAAI,CAACC,WAAW,CAAC,CAAC,EADZD,IAEL,CACT,CAAC,CACD,CAAC,cACNhD,KAAA,QAAKmC,SAAS,CAAC,YAAY,CAAAC,QAAA,eACvBtC,IAAA,UAAAsC,QAAA,CAAO,aAAW,CAAO,CAAC,cAC1BtC,IAAA,UACIwC,IAAI,CAAC,MAAM,CACXX,KAAK,CAAErB,UAAW,CAClBiC,QAAQ,CAAGxB,CAAC,EAAKR,aAAa,CAACQ,CAAC,CAACyB,MAAM,CAACb,KAAK,CAACc,OAAO,CAAC,KAAK,CAAE,EAAE,CAAC,CAACS,KAAK,CAAC,CAAC,CAAE,EAAE,CAAC,CAAE,CAC/ER,WAAW,CAAC,qBAAqB,CACjCC,QAAQ,MACX,CAAC,EACD,CAAC,cACN3C,KAAA,QAAKmC,SAAS,CAAC,YAAY,CAAAC,QAAA,eACvBtC,IAAA,UAAAsC,QAAA,CAAO,kBAAgB,CAAO,CAAC,cAC/BtC,IAAA,UACIwC,IAAI,CAAC,MAAM,CACXX,KAAK,CAAEf,cAAe,CACtB2B,QAAQ,CAAGxB,CAAC,EAAKF,iBAAiB,CAACE,CAAC,CAACyB,MAAM,CAACb,KAAK,CAAE,CACnDe,WAAW,CAAC,cAAc,CAC1BC,QAAQ,MACX,CAAC,EACD,CAAC,cACN3C,KAAA,QAAKmC,SAAS,CAAC,UAAU,CAAAC,QAAA,eACrBpC,KAAA,QAAKmC,SAAS,CAAC,YAAY,CAAAC,QAAA,eACvBtC,IAAA,UAAAsC,QAAA,CAAO,aAAW,CAAO,CAAC,cAC1BtC,IAAA,UACIwC,IAAI,CAAC,MAAM,CACXX,KAAK,CAAEnB,UAAW,CAClB+B,QAAQ,CAAGxB,CAAC,EAAKN,aAAa,CAACM,CAAC,CAACyB,MAAM,CAACb,KAAK,CAAE,CAC/Ce,WAAW,CAAC,OAAO,CACnBS,SAAS,CAAE,CAAE,CACbR,QAAQ,MACX,CAAC,EACD,CAAC,cACN3C,KAAA,QAAKmC,SAAS,CAAC,YAAY,CAAAC,QAAA,eACvBtC,IAAA,UAAAsC,QAAA,CAAO,KAAG,CAAO,CAAC,cAClBtC,IAAA,UACIwC,IAAI,CAAC,UAAU,CACfX,KAAK,CAAEjB,GAAI,CACX6B,QAAQ,CAAGxB,CAAC,EAAKJ,MAAM,CAACI,CAAC,CAACyB,MAAM,CAACb,KAAK,CAACuB,KAAK,CAAC,CAAC,CAAE,CAAC,CAAC,CAAE,CACpDR,WAAW,CAAC,KAAK,CACjBS,SAAS,CAAE,CAAE,CACbR,QAAQ,MACX,CAAC,EACD,CAAC,EACL,CAAC,cACN3C,KAAA,WAAQsC,IAAI,CAAC,QAAQ,CAACH,SAAS,CAAC,eAAe,CAAAC,QAAA,EAAC,YACvC,CAAChC,MAAM,EACR,CAAC,EACP,CACT,CACA,CAAC,CAEd,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}